<div class="navigator">

  <div class="navigator-filters">
    <%= render :partial => 'issues/sidebar2' -%>
  </div>


  <div class="navigator-results">
    <%= render :partial => 'search' -%>
  </div>
</div>

<script type="text/javascript">
  function onBulkIssues(issues_query_params){
    // SONAR-4723 pagination parameters should be removed after applying bulk change
    delete issues_query_params.pageIndex;
    window.location = baseUrl + '/issues/search?' + jQuery.param(issues_query_params);
  }
</script>

<script id="baseFilterTemplate" type="text/template">
  <div class="navigator-filter-label">{{ name }}</div>
  <div class="navigator-filter-value {[ if (defaultValue) { ]}default{[ } ]}">{{ value }}</div>
</script>

<script id="detailsFilterTemplate" type="text/template">
  <div class="navigator-filter-details-inner">
    No details
  </div>
</script>

<script id="filterBarTemplate" type="text/template">
  <div class="navigator-filters-list"></div>
</script>

<script id="selectFilterTemplate" type="text/template">
  <ul class="navigator-filter-select-list">
    {[ _.each(choices, function(value, key) { ]}
      <li>
        <label>
          <input type="checkbox" name="{{ property }}" value="{{ key }}">
          <span>{{ value }}</span>
        </label>
      </li>
    {[ }); ]}
  </ul>
</script>

<script id="ajaxSelectFilterTemplate" type="text/template">
  <div class="navigator-filter-search">
      <input type="text">
  </div>
</script>

<script id="ajaxSelectSuggestionTemplate" type="text/template">
  <label>
    <input type="checkbox" value="{{ id }}" {[ if (selected) { ]}checked{[ } ]}>
    <span>{{ text }}</span>
  </label>
</script>

<script id="ajaxSelectNoSuggestionsTemplate" type="text/template">
  No results
</script>

<script id="rangeFilterTemplate" type="text/template">
  <div class="navigator-filter-details-inner">
    <input class="navigator-filter-range-input" type="text"
           name="{{ propertyFrom }}">
    <label>to</label>
    <input class="navigator-filter-range-input" type="text"
           name="{{ propertyTo }}">
  </div>
</script>

<script id="favoriteFilterTemplate" type="text/template">
  <div class="navigator-filter-favorite"></div>
</script>

<script id="detailsFavoriteFilterTemplate" type="text/template">
  <ul class="navigator-filter-select-list">
    {[ if (_.keys(choices).length > 0) { ]}
      {[ _.each(choices, function(value, key) { ]}
      <li>
        <label data-id="{{ key }}">{{ value }}</label>
      </li>
      {[ }); ]}
      <li class="line"></li>
    {[ } ]}
    <li class="manage">
      <label>Manage</label>
    </li>
  </ul>
</script>

<script id="moreCriteriaFilterTemplate" type="text/template">
  <strong>+</strong> More Criteria
</script>

<script id="detailsMoreCriteriaFilterTemplate" type="text/template">
  <ul class="navigator-filter-select-list">
    {[ _.each(filters, function(filter) { ]}
    <li>
      <label data-id="{{ filter.cid }}">{[ print(filter.get('name')); ]}</label>
    </li>
    {[ }); ]}
  </ul>
</script>

<script>
  _.templateSettings = {
    interpolate: /\{\{(.+?)\}\}/g,
    evaluate: /\{\[(.+?)\]\}/g
  };

  _.extend(window.SS, {
    severities: <%= RulesConfigurationController::RULE_PRIORITIES.to_json.html_safe -%>,
    statuses: <%= @options_for_statuses.to_json.html_safe -%>,
    resolutions: <%= @options_for_resolutions.to_json.html_safe -%>,
    favorites: <%= render :partial => 'issues/filter_favourites2' -%>
  });

  window.SS.NavigatorApp.start();
</script>
